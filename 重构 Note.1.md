*WHEN?*

### 一些代码的坏味道

**Duplicated Code （重复代码）**

1. 相同的代码: 提取出来
2. 相似的代码: 分离相似和差异部分，提取出相似部分
3. 不同的算法，同样的工作：用最清晰的那个算法代替其他所有

**Long Method （过长函数）**

1. 短小的函数更长寿，顺便给短函数取个好名字，好让它一目了然。
2. 积极得分解函数。当你觉得需要注释的时候，你应该把需要说明的东西写进一个独立函数中，并以其用途（!而非实现手法）命名。
3. 检索函数中的注释处，流程控制处，这些往往是十分需要分解的地方。

**Large Class （过大的类）**

*PS: 类在我的日常语言里面用得比较少，所以我换个思路*

1. 一个模块内包含的方法和引用的依赖过多的时候，适当得分解成多个模块。
2. 内部消化掉模块中的重复代码，将“五个百行函数”整理成五个“十行函数”和十个提炼出来的“双行函数”。
3. 先确定消费者需要的接口，从这个角度出发或许能够帮助你看清如何分解这个模块。
4. 如果是一些GUI类，你可能需要在多处时候重复的数据，你使用*观察者模式*, *P/S模式*等可以把这些数据独立出来供视图消费。

**Long Parameter List（过长参数列）**

Emmmmmm, 现在又闭包有面向对象基本上不容易出现过长参数列这种情况。除非你发现了你的参数经常变动，否则基本上不需要担心什么。

**Divergent Change（发散式变化）**

